import{_ as s,r as t,o as i,c as o,a as n,b as l,d as a,e as c}from"./app.32572a58.js";const d={},p=n("h2",{id:"jwt-\u7B80\u4ECB",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#jwt-\u7B80\u4ECB","aria-hidden":"true"},"#"),a(" JWT \u7B80\u4ECB")],-1),r=n("p",null,"JWT \u5168\u540D JSON Web Token \u662F\u4E00\u4E2A\u5F00\u653E\u6807\u51C6\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u79CD\u7D27\u51D1\u7684\u3001\u81EA\u5305\u542B\u7684\u65B9\u5F0F\uFF0C\u7528\u4E8E\u4F5C\u4E3A JSON \u5BF9\u8C61\u5728\u5404\u65B9\u4E4B\u95F4\u5B89\u5168\u5730\u4F20\u8F93\u4FE1\u606F\u3002\u8BE5\u4FE1\u606F\u53EF\u4EE5\u88AB\u9A8C\u8BC1\u548C\u4FE1\u4EFB\uFF0C\u56E0\u4E3A\u5B83\u662F\u6570\u5B57\u7B7E\u540D\u7684\u3002",-1),u={href:"https://jwt.io/",target:"_blank",rel:"noopener noreferrer"},v=a("JWT \u52A0\u5BC6\u89E3\u5BC6\u5DE5\u5177"),h=c(`<h2 id="token-\u9274\u6743\u673A\u5236\u7684\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#token-\u9274\u6743\u673A\u5236\u7684\u6B65\u9AA4" aria-hidden="true">#</a> Token \u9274\u6743\u673A\u5236\u7684\u6B65\u9AA4</h2><ol><li>\u7528\u6237\u4F7F\u7528\u7528\u6237\u540D\u5BC6\u7801\u6765\u8BF7\u6C42\u670D\u52A1\u5668</li><li>\u670D\u52A1\u5668\u8FDB\u884C\u9A8C\u8BC1\u7528\u6237\u7684\u4FE1\u606F</li><li>\u670D\u52A1\u5668\u901A\u8FC7\u9A8C\u8BC1\u53D1\u9001\u7ED9\u7528\u6237\u4E00\u4E2A token</li><li>\u5BA2\u6237\u7AEF\u5B58\u50A8 token\uFF0C\u5E76\u5728\u6BCF\u6B21\u8BF7\u6C42\u65F6\u9644\u9001\u4E0A\u8FD9\u4E2A token \u503C</li><li>\u670D\u52A1\u7AEF\u9A8C\u8BC1 token \u503C\uFF0C\u5E76\u8FD4\u56DE\u6570\u636E</li></ol><h2 id="jwt-\u7684\u6784\u6210" tabindex="-1"><a class="header-anchor" href="#jwt-\u7684\u6784\u6210" aria-hidden="true">#</a> JWT \u7684\u6784\u6210</h2><h3 id="encoded" tabindex="-1"><a class="header-anchor" href="#encoded" aria-hidden="true">#</a> encoded</h3><p>\u7531\u4E09\u6BB5\u4FE1\u606F\u6784\u6210\uFF0C\u7528 &#39;.&#39; \u6765\u9694\u5F00</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="header" tabindex="-1"><a class="header-anchor" href="#header" aria-hidden="true">#</a> header</h3><p>\u89E3\u7801\u540E\u7684\u5934\u90E8\uFF0C\u7531\u52A0\u5BC6\u7684\u7B97\u6CD5\u548C\u7C7B\u578B\u7EC4\u6210</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
  &quot;alg&quot;: &quot;HS256&quot;,
  &quot;typ&quot;: &quot;JWT&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="payload" tabindex="-1"><a class="header-anchor" href="#payload" aria-hidden="true">#</a> payload</h3><p>\u8F7D\u8377\uFF0C\u7528\u4E8E\u5B58\u653E\u6709\u6548\u4FE1\u606F</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
  &quot;sub&quot;: &quot;1234567890&quot;,
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;iat&quot;: 1516239022
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="signature" tabindex="-1"><a class="header-anchor" href="#signature" aria-hidden="true">#</a> SIGNATURE</h3><p>\u7B7E\u8BC1\u4FE1\u606F</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>HMACSHA256(
  base64UrlEncode(header) + &quot;.&quot; +
  base64UrlEncode(payload),
  your-256-bit-secret
) secret base64 encoded
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528" aria-hidden="true">#</a> \u4F7F\u7528</h2><ol><li><p>\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> jsonwebtoken
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u5728\u6570\u636E\u5E93\u6A21\u578B\u6587\u4EF6\u4E2D\u5F15\u5165</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> jwt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;jsonwebtoken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u52A0\u5BC6\u5185\u5BB9\u3001\u5BC6\u94A5\u3001\u8FC7\u671F\u65F6\u95F4</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_id <span class="token punctuation">}</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">JWT_KEY</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">expiresIn</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">JWT_EXPIRES</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5411\u5BA2\u6237\u7AEF\u53D1\u9001\u643A\u5E26 JWT \u7684 cookie</p></li><li><p>\u7528\u6237\u9274\u6743\u65F6\u8FDB\u884C\u89E3\u5BC6</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">JWT_KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol>`,17);function k(b,m){const e=t("ExternalLinkIcon");return i(),o("div",null,[p,r,n("p",null,[n("a",u,[v,l(e)])]),h])}var x=s(d,[["render",k],["__file","Node\u4F7F\u7528JWT\u9A8C\u8BC1\u7528\u6237\u6743\u9650.html.vue"]]);export{x as default};
